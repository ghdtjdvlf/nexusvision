<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GSAP ScrollSmoother 예제</title>

  <!-- GSAP core + ScrollSmoother 플러그인 -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollSmoother.min.js"></script>

  <style>
    /* html/body 100% 높이 필수 */
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      overflow-x: hidden;
      background: #1a1721;
      color: #fff;
    }

    /* wrapper는 fixed 로 뷰포트 크기만 차지, overflow:hidden */
    #wrapper {
      position: fixed;
      inset: 0; /* top:0;right:0;bottom:0;left:0; */
      overflow: hidden;
    }

    /* content 가 실제 스크롤 될 부분 */
    #content {
      position: relative;
      width: 100%;
      /* padding-bottom 을 넉넉히 주면 스크롤 길이 확보 */
      padding-bottom: 200vh;
    }

    /* 중앙 고정 텍스트 */
    .text {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-family: termina, sans-serif;
      font-size: 8vw;
      font-weight: 900;
      color: white;
      -webkit-text-stroke: 1.5px white;
      pointer-events: none;
      z-index: 10;
    }
    .outline-text {
      color: transparent;
      -webkit-text-stroke: 1.5px white;
    }
    .filter-text {
      mix-blend-mode: screen;
      color: #804691;
    }

    .images {
      /* 텍스트 아래로 밀어내기 */
      padding-top: 60vh;
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: repeat(20,2%);
      grid-template-rows: repeat(30,3%);
      gap: 0;
    }
    .images img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    /* 그리드 위치 지정 (원본 예제 그대로) */
    .images img:nth-child(1)  { grid-area: 1/1/6/8;  }
    .images img:nth-child(2)  { grid-area: 3/12/8/20; }
    .images img:nth-child(3)  { grid-area: 9/5/13/15; }
    .images img:nth-child(4)  { grid-area: 14/1/18/8; }
    .images img:nth-child(5)  { grid-area: 16/12/20/19;}
    .images img:nth-child(6)  { grid-area: 20/2/25/9; }
    .images img:nth-child(7)  { grid-area: 22/11/24/20;}
    .images img:nth-child(8)  { grid-area: 26/5/30/15; }
  </style>
</head>
<body>

  <h1 class="text">Scrolly Images</h1>
  <h1 aria-hidden="true" class="text outline-text">Scrolly Images</h1>
  <h1 aria-hidden="true" class="text filter-text">Scrolly Images</h1>

  <div id="wrapper">
    <div id="content">
      <div class="images">
        <!-- 원본 이미지 URL 그대로 -->
        <img src="https://images.unsplash.com/photo-1556856425-366d6618905d?auto=format&amp;fit=crop&amp;w=400&amp;q=60" alt="">
        <img src="https://images.unsplash.com/photo-1520271348391-049dd132bb7c?auto=format&amp;fit=crop&amp;w=400&amp;q=80" alt="">
        <img src="https://images.unsplash.com/photo-1609166214994-502d326bafee?auto=format&amp;fit=crop&amp;w=400&amp;q=80" alt="">
        <img src="https://images.unsplash.com/photo-1589882265634-84f7eb9a3414?auto=format&amp;fit=crop&amp;w=434&amp;q=80" alt="">
        <img src="https://images.unsplash.com/photo-1514689832698-319d3bcac5d5?auto=format&amp;fit=crop&amp;w=434&amp;q=80" alt="">
        <img src="https://images.unsplash.com/photo-1535207010348-71e47296838a?auto=format&amp;fit=crop&amp;w=300&amp;q=80" alt="">
        <img src="https://images.unsplash.com/photo-1588007375246-3ee823ef4851?auto=format&amp;fit=crop&amp;w=400&amp;q=60" alt="">
        <img src="https://images.unsplash.com/photo-1571450669798-fcb4c543f6a4?auto=format&amp;fit=crop&amp;w=400&amp;q=60" alt="">
      </div>
    </div>
  </div>

  <script>
    // 플러그인 등록
    gsap.registerPlugin(ScrollSmoother);

    window.addEventListener("load", function() {
      // 이미지를 skewY 로 움직이기 위한 세팅
      const imgs = document.querySelectorAll(".images img"),
            clamp = gsap.utils.clamp(-20, 20),
            setters = [];
      imgs.forEach(img => setters.push(gsap.quickTo(img, "skewY", {duration:0.6})));

      // 실제 ScrollSmoother 생성
      ScrollSmoother.create({
        wrapper:"#wrapper",
        content:"#content",
        smooth:2,
        effects:true,
        onUpdate: self => {
          // 스크롤 속도 기반 skew
          let v = clamp(self.getVelocity() / -50);
          setters.forEach(fn=>fn(v));
        },
        onStop: () => setters.forEach(fn=>fn(0))
      });
    });
  </script>
</body>
</html>
